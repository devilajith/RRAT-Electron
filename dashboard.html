<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <style>
        .message {
            color: red;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <img src="images/group-40.svg" alt="logo" class="rrat">
            </div>
            <div class="profile-picture">
                <img src="images/user.svg" alt="User" class="profile" id="profile">
                <span id="user-name"></span>
            </div>
        </div>
        <div class="tabs">
            <button class="tab active" id="new-assessment">New assessment</button>
            <button class="tab" id="my-assessments">My assessments</button>
        </div>
        <div class="content">
            <h2>Assessment Name<span class="required">*</span></h2>
            <input type="text" id="assessment-name" class="input-field" placeholder="Enter assessment name">
            <button id="start-button" class="start-button">Start</button>
            <div id="message" class="message"></div>
            <div class="disclaimer">
                <h3>Disclaimer</h3>
                <p>
                    Please start the assessment only if you can finish it completely. Gather all details of your company and modus operandi before attending assessment for optimum results. Donâ€™t close the window during the test or all unsaved progress will be lost. All details regarding time of the test and answers will be collected for smooth functioning and optimum results.
                </p>
            </div>
        </div>
    </div>
    <script>
        document.getElementById('profile').addEventListener('click', function() {
            window.location.href = 'profile.html';
        });
        document.getElementById('my-assessments').addEventListener('click', function() {
            window.location.href = 'myassessment.html';
        });

        document.getElementById('assessment-name').addEventListener('input', function(event) {
            const input = event.target;
            input.value = input.value.replace(/[^a-zA-Z\s]/g, '');
        });

        document.getElementById('start-button').addEventListener('click', function() {
            const assessmentName = document.getElementById('assessment-name').value;
            const messageElement = document.getElementById('message');

            if (assessmentName.trim() === '') {
                messageElement.textContent = 'Please enter the assessment name.';
                messageElement.style.color = 'red';
                // Hide the message after 3 seconds
                setTimeout(() => {
                    messageElement.textContent = '';
                }, 3000);
            } else {
                localStorage.setItem('assessmentName', assessmentName); // Store the assessment name
                window.location.href = 'quiz/quiz.html'; // navigate to quiz.html
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const userId = sessionStorage.getItem('userId');
            if (userId) {
                window.electron.send('get-profile', userId);
                window.electron.receive('profile-data', (response) => {
                    if (response.success && response.data) {
                        document.getElementById('user-name').textContent = response.data.name;
                    } else {
                        console.error('Failed to load profile data');
                    }
                });
            }
        });
    </script>
</body>
</html>
